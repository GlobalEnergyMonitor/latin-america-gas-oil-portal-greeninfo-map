L.Control.BasemapBar=L.Control.extend({options:{position:"topright"},initialize:function(t){if(!t.layers||!Array.isArray(t.layers))throw"L.Control.BasemapBar: missing layers list";L.setOptions(this,t),this.buttons={},this.map=null},onAdd:function(t){this.map=t,this._layers={};for(var e=0,a=this.options.layers.length;e<a;e++){var s=this.options.layers[e];switch(s.label=s.label.toLowerCase(),s.type){case"xyz":var r=L.Util.extend({attribution:s.attribution},s.tileLayerOptions);this._layers[s.label]=L.tileLayer(s.url,r);break;case"google":switch(s.url){case"satellite":this._layers[s.label]=new L.Google("SATELLITE",{zIndex:-1});break;case"hybrid":this._layers[s.label]=new L.Google("HYBRID",{zIndex:-1});break;case"streets":this._layers[s.label]=new L.Google("ROADMAP",{zIndex:-1});break;case"terrain":this._layers[s.label]=new L.Google("TERRAIN",{zIndex:-1})}break;case"google-mutant":this._layers[s.label]=L.gridLayer.googleMutant({type:s.url,zIndex:-1});break;case"bing":switch(s.url){case"aerial":this._layers[s.label]=new L.BingLayer(s.apikey,{zIndex:-1,type:"Aerial"});break;case"street":this._layers[s.label]=new L.BingLayer(s.apikey,{zIndex:-1,type:"Road"});break;default:throw"L.Control.BasemapBar: Unknown Bing subtype ("+s.url+") Must be: street, aerial"}break;default:throw"L.Control.BasemapBar: Unknown layer 'type' ("+s.type+") Must be: xyz, bing, google"}}var i=L.DomUtil.create("div","leaflet-control-basemapbar");for(e=0,a=this.options.layers.length;e<a;e++){var o=this.options.layers[e].label,l=this.options.layers[e].tooltip?this.options.layers[e].tooltip:"",n=L.DomUtil.create("div","leaflet-control-basemapbar-option",i);n.control=this,n.innerHTML=o.toUpperCase(),n.title=l,n.dataset.layer=o,n.dataset.lang=o+"-basemap",L.DomEvent.addListener(n,"mousedown",L.DomEvent.stopPropagation).addListener(n,"click",L.DomEvent.stopPropagation).addListener(n,"click",L.DomEvent.preventDefault).addListener(n,"click",(function(){this.control.selectLayer(this.dataset.layer)})),this.buttons[o]=n}return i},selectLayer:function(t){for(var e in this.buttons){var a=this.buttons[e],s=this.options.credits;e==t?(L.DomUtil.addClass(a,"leaflet-control-basemapbar-option-active"),this.map.addLayer(this._layers[e],!0),s.addAttribution(this.attribution)):(L.DomUtil.removeClass(a,"leaflet-control-basemapbar-option-active"),this.map.removeLayer(this._layers[e]),s.removeAttribution(this.attribution))}return this},whichLayer:function(){for(var t in this.buttons){var e=this.buttons[t];if(L.DomUtil.hasClass(e,"leaflet-control-basemapbar-option-active"))return t}return null}});